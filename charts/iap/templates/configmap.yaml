{{- if and $.Values.processExporter $.Values.processExporter.enabled -}}
# Copyright (c) 2025, Itential, Inc
# GNU General Public License v3.0+ (see LICENSE or https://www.gnu.org/licenses/gpl-3.0.txt)
# Source: charts/iap/templates/configmap.yaml
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: iap-process-exporter
  labels:
    {{- include "iap.labels" . | nindent 4 }}
    app.kubernetes.io/component: "iap-process-exporter-configMap"
  annotations:
    kubernetes.io/description: "Itential Automation Platform Process exporter configMap."
    {{- include "iap.annotations" . | nindent 4 }}
data:
  process-exporter.conf: |
    process_names:
      - cmdline:
          - Pronghorn
      - cmdline:
          - python3
  web-config.yaml: |
    tls_server_config:
      cert_file: /etc/ssl/platform/tls.crt
      key_file: /etc/ssl/platform/tls.key
{{- end -}}